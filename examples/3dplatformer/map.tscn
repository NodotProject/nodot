[gd_scene load_steps=19 format=3 uid="uid://knhhpghrn0tv"]

[ext_resource type="PackedScene" uid="uid://osaskyd3chgg" path="res://examples/3dplatformer/player.tscn" id="1_soi8n"]
[ext_resource type="PackedScene" uid="uid://dn5qsfqyxucpo" path="res://examples/3dplatformer/models/door.tscn" id="2_mlal5"]
[ext_resource type="Script" path="res://addons/nodot/physics/Mover3D.gd" id="3_pj2b2"]
[ext_resource type="Script" path="res://addons/nodot/utility/SignalConnector.gd" id="4_ue8ae"]
[ext_resource type="Script" path="res://addons/nodot/physics/WaterArea3D.gd" id="5_3sksf"]

[sub_resource type="BoxMesh" id="BoxMesh_qi556"]
size = Vector3(50, 1, 50)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_kg54i"]
points = PackedVector3Array(25.3919, 0.690476, 25.3919, -25.3919, -0.896825, -25.3919, -25.3919, 0.690476, -25.3919, 25.3919, -0.896825, -25.3919, -25.3919, -0.896825, 25.3919, -25.3919, 0.690476, 25.3919, 25.3919, 0.690476, -25.3919, 25.3919, -0.896825, 25.3919)

[sub_resource type="BoxMesh" id="BoxMesh_n4cxs"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_ucq06"]
points = PackedVector3Array(-0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5)

[sub_resource type="BoxMesh" id="BoxMesh_jccds"]
size = Vector3(5, 5, 1)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_4sep6"]
points = PackedVector3Array(-2.35782, -2.35735, -0.5, 2.53919, 2.53869, 0.571429, 2.53919, -2.53869, 0.571429, -2.53919, 2.53869, 0.571429, 2.35782, 2.35735, -0.5, -2.53919, -2.53869, 0.571429, 2.35782, -2.35735, -0.5, -2.35782, 2.35735, -0.5)

[sub_resource type="BoxShape3D" id="BoxShape3D_nkekl"]
size = Vector3(2, 2, 7.38342)

[sub_resource type="BoxMesh" id="BoxMesh_3unkb"]
size = Vector3(2, 1, 2)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_3d8qe"]
points = PackedVector3Array(0.954305, 0.5, 0.954305, -0.985089, -0.5, -0.985089, -0.985089, -0.5, 0.985089, 0.985089, -0.5, -0.985089, -0.954305, 0.5, -0.954305, 0.985089, -0.5, 0.985089, -0.954305, 0.5, 0.954305, 0.954305, 0.5, -0.954305)

[sub_resource type="BoxShape3D" id="BoxShape3D_msk4j"]
size = Vector3(4, 4, 4)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_y1132"]
albedo_color = Color(0.596078, 0.596078, 0.596078, 1)

[sub_resource type="BoxMesh" id="BoxMesh_nrtqk"]
material = SubResource("StandardMaterial3D_y1132")

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_4m4f4"]
points = PackedVector3Array(-0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5)

[node name="map" type="Node3D"]

[node name="ThirdPersonCharacter" parent="." instance=ExtResource("1_soi8n")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.1, 2.2)

[node name="StaticBody3D" type="StaticBody3D" parent="."]

[node name="MeshInstance3D" type="MeshInstance3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
mesh = SubResource("BoxMesh_qi556")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
shape = SubResource("ConvexPolygonShape3D_kg54i")

[node name="StaticBody3D2" type="StaticBody3D" parent="."]

[node name="MeshInstance3D2" type="MeshInstance3D" parent="StaticBody3D2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
mesh = SubResource("BoxMesh_n4cxs")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
shape = SubResource("ConvexPolygonShape3D_ucq06")

[node name="StaticBody3D3" type="StaticBody3D" parent="."]

[node name="MeshInstance3D" type="MeshInstance3D" parent="StaticBody3D3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.46233, 16.5)
mesh = SubResource("BoxMesh_jccds")

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.46233, 16.5)
shape = SubResource("ConvexPolygonShape3D_4sep6")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -0.0156724, 0.999877, 0, -0.999877, -0.0156724, 0, 5.08343, 0)

[node name="door" parent="." instance=ExtResource("2_mlal5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.36138, 0.190476, 0.551353)

[node name="Area3D" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8.64818, 0.904527, 0.201943)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0573988, 0)
shape = SubResource("BoxShape3D_nkekl")

[node name="BodyEntered" type="Node" parent="Area3D" node_paths=PackedStringArray("trigger_node", "target_node")]
script = ExtResource("4_ue8ae")
trigger_node = NodePath("..")
trigger_signal = "body_entered"
target_node = NodePath("../../door1")
target_method = "activate"

[node name="BodyExited" type="Node" parent="Area3D" node_paths=PackedStringArray("trigger_node", "target_node")]
script = ExtResource("4_ue8ae")
trigger_node = NodePath("..")
trigger_signal = "body_exited"
target_node = NodePath("../../door1")
target_method = "deactivate"

[node name="door1" parent="." instance=ExtResource("2_mlal5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.44937, 0, 0.201943)

[node name="floating_platform" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.7324, 0, -6.57198)

[node name="MeshInstance3D" type="MeshInstance3D" parent="floating_platform"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.478445, 0)
mesh = SubResource("BoxMesh_3unkb")

[node name="CollisionShape3D" type="CollisionShape3D" parent="floating_platform"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.478445, 0)
shape = SubResource("ConvexPolygonShape3D_3d8qe")

[node name="Mover3D" type="Node3D" parent="floating_platform" node_paths=PackedStringArray("target_node")]
script = ExtResource("3_pj2b2")
target_node = NodePath("..")
auto_start = true
destination_position = Vector3(-2.732, 10, -6.572)
destination_rotation = Vector3(0, 180, 0)
time_to_destination = 10.0
time_to_origin = 10.0
transition_type = 4

[node name="SignalConnector" type="Node" parent="floating_platform" node_paths=PackedStringArray("trigger_node", "target_node")]
script = ExtResource("4_ue8ae")
trigger_node = NodePath("../Mover3D")
trigger_signal = "movement_ended"
target_node = NodePath("../Mover3D")

[node name="WaterArea3D2" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -14.3, 1, -2)
script = ExtResource("5_3sksf")
float_force = null

[node name="CollisionShape3D" type="CollisionShape3D" parent="WaterArea3D2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -14.3, 2.03577, -2)
shape = SubResource("BoxShape3D_msk4j")

[node name="RigidBody3D" type="RigidBody3D" parent="."]

[node name="MeshInstance3D" type="MeshInstance3D" parent="RigidBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -14.0639, 4.0292, -1.66007)
mesh = SubResource("BoxMesh_nrtqk")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="RigidBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -14.0639, 4.0292, -1.66007)
shape = SubResource("ConvexPolygonShape3D_4m4f4")
