[gd_scene load_steps=34 format=3 uid="uid://yf3jwue0vvs0"]

[ext_resource type="PackedScene" uid="uid://cvr3xfnhuhxn3" path="res://examples/fps/player.tscn" id="1_ry0a0"]
[ext_resource type="PackedScene" uid="uid://dqsar57406ve3" path="res://examples/fps/objects/military_target.tscn" id="2_x7gfq"]
[ext_resource type="PackedScene" uid="uid://b16yeyarw2ht2" path="res://examples/fps/objects/breakable_barrel.tscn" id="3_mk7d7"]
[ext_resource type="PackedScene" uid="uid://hme8qon3s6fl" path="res://examples/fps/objects/breakable_jar.tscn" id="4_g2uxp"]
[ext_resource type="PackedScene" uid="uid://dgh8b72jwbv11" path="res://examples/fps/objects/breakable_crates.tscn" id="4_nrhjp"]
[ext_resource type="Script" path="res://addons/nodot/physics/WaterArea3D.gd" id="6_myy8d"]
[ext_resource type="Material" uid="uid://ck4ea8jnulenl" path="res://addons/nodot/shaders/clean_water.tres" id="7_5kl42"]
[ext_resource type="ArrayMesh" uid="uid://c1o2udpxgarsf" path="res://examples/fps/models/pool.obj" id="7_qqemd"]
[ext_resource type="AudioStream" uid="uid://d1moonipd5ko3" path="res://examples/fps/sfx/pool_ambience.mp3" id="8_jesnd"]
[ext_resource type="Script" path="res://addons/nodot/sound/SFXPlayer.gd" id="9_g21i7"]
[ext_resource type="Texture2D" uid="uid://dnghpx7yqviuc" path="res://examples/fps/materials/skybox.jpg" id="9_qys48"]
[ext_resource type="AudioStream" uid="uid://bqas22x5wpn6w" path="res://examples/fps/sfx/splash.mp3" id="10_f4kyv"]
[ext_resource type="AudioStream" uid="uid://bddljpngewaim" path="res://examples/fps/sfx/splash2.mp3" id="11_o4gop"]
[ext_resource type="AudioStream" uid="uid://cmtc7ntebm7y7" path="res://examples/fps/sfx/splash3.mp3" id="12_laggk"]

[sub_resource type="BoxMesh" id="BoxMesh_0aav7"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_u0i2t"]
data = PackedVector3Array(-0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5)

[sub_resource type="BoxMesh" id="BoxMesh_7jii0"]
size = Vector3(35, 0.5, 50)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_xx0cl"]
data = PackedVector3Array(-17.5, 0.25, 25, 17.5, 0.25, 25, -17.5, -0.25, 25, 17.5, 0.25, 25, 17.5, -0.25, 25, -17.5, -0.25, 25, 17.5, 0.25, -25, -17.5, 0.25, -25, 17.5, -0.25, -25, -17.5, 0.25, -25, -17.5, -0.25, -25, 17.5, -0.25, -25, 17.5, 0.25, 25, 17.5, 0.25, -25, 17.5, -0.25, 25, 17.5, 0.25, -25, 17.5, -0.25, -25, 17.5, -0.25, 25, -17.5, 0.25, -25, -17.5, 0.25, 25, -17.5, -0.25, -25, -17.5, 0.25, 25, -17.5, -0.25, 25, -17.5, -0.25, -25, 17.5, 0.25, 25, -17.5, 0.25, 25, 17.5, 0.25, -25, -17.5, 0.25, 25, -17.5, 0.25, -25, 17.5, 0.25, -25, -17.5, -0.25, 25, 17.5, -0.25, 25, -17.5, -0.25, -25, 17.5, -0.25, 25, 17.5, -0.25, -25, -17.5, -0.25, -25)

[sub_resource type="BoxMesh" id="BoxMesh_wc1fv"]
size = Vector3(10, 5, 1)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_uhgr4"]
data = PackedVector3Array(-5, 2.5, 0.5, 5, 2.5, 0.5, -5, -2.5, 0.5, 5, 2.5, 0.5, 5, -2.5, 0.5, -5, -2.5, 0.5, 5, 2.5, -0.5, -5, 2.5, -0.5, 5, -2.5, -0.5, -5, 2.5, -0.5, -5, -2.5, -0.5, 5, -2.5, -0.5, 5, 2.5, 0.5, 5, 2.5, -0.5, 5, -2.5, 0.5, 5, 2.5, -0.5, 5, -2.5, -0.5, 5, -2.5, 0.5, -5, 2.5, -0.5, -5, 2.5, 0.5, -5, -2.5, -0.5, -5, 2.5, 0.5, -5, -2.5, 0.5, -5, -2.5, -0.5, 5, 2.5, 0.5, -5, 2.5, 0.5, 5, 2.5, -0.5, -5, 2.5, 0.5, -5, 2.5, -0.5, 5, 2.5, -0.5, -5, -2.5, 0.5, 5, -2.5, 0.5, -5, -2.5, -0.5, 5, -2.5, 0.5, 5, -2.5, -0.5, -5, -2.5, -0.5)

[sub_resource type="BoxMesh" id="BoxMesh_mllw1"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_h8o56"]
points = PackedVector3Array(-0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5)

[sub_resource type="BoxShape3D" id="BoxShape3D_yk2u5"]
size = Vector3(23, 4, 11.696)

[sub_resource type="GDScript" id="GDScript_gmyiu"]
resource_name = "splashsfx"
script/source = "extends Node

@onready var waterArea3d: WaterArea3D = get_parent()
@onready var player: SFXPlayer3D = waterArea3d.get_node(\"SFXPlayer3D\")

func _ready():
  waterArea3d.connect(\"body_entered\", splash)
  waterArea3d.connect(\"body_exited\", splash)

func splash(body: Node3D):
  player.global_position = body.global_position
  player.action()
"

[sub_resource type="FogMaterial" id="FogMaterial_67a4i"]
albedo = Color(0.568627, 0.815686, 1, 1)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_a17bw"]
data = PackedVector3Array(-240, -16, 208, -240, -16, -64, -240, 0, 208, -240, 0, 208, -240, -16, -64, -240, 0, -64, -240, 0, 208, 240, 0, 208, -240, -16, 208, -240, -16, 208, 240, 0, 208, 240, -16, 208, -240, -16, 208, 240, -16, 208, -240, -16, -64, -240, -16, -64, 240, -16, 208, 240, -16, -64, -240, 0, -64, 240, 0, -64, -240, 0, 208, -240, 0, 208, 240, 0, -64, 240, 0, 208, -240, -16, -64, 240, -16, -64, -240, 0, -64, -240, 0, -64, 240, -16, -64, 240, 0, -64, 240, 0, 208, 240, 0, -64, 240, -16, 208, 240, -16, 208, 240, 0, -64, 240, -16, -64, -240, 0, -48, -240, 0, -64, -240, 80, -48, -240, 80, -48, -240, 0, -64, -240, 80, -64, -240, 80, -48, 240, 80, -48, -240, 0, -48, -240, 0, -48, 240, 80, -48, 240, 0, -48, -240, 0, -48, 240, 0, -48, -240, 0, -64, -240, 0, -64, 240, 0, -48, 240, 0, -64, -240, 80, -64, 240, 80, -64, -240, 80, -48, -240, 80, -48, 240, 80, -64, 240, 80, -48, -240, 0, -64, 240, 0, -64, -240, 80, -64, -240, 80, -64, 240, 0, -64, 240, 80, -64, 240, 80, -48, 240, 80, -64, 240, 0, -48, 240, 0, -48, 240, 80, -64, 240, 0, -64, -240, 0, 208, -240, 0, 192, -240, 80, 208, -240, 80, 208, -240, 0, 192, -240, 80, 192, -240, 80, 208, 240, 80, 208, -240, 0, 208, -240, 0, 208, 240, 80, 208, 240, 0, 208, -240, 0, 208, 240, 0, 208, -240, 0, 192, -240, 0, 192, 240, 0, 208, 240, 0, 192, -240, 80, 192, 240, 80, 192, -240, 80, 208, -240, 80, 208, 240, 80, 192, 240, 80, 208, -240, 0, 192, 240, 0, 192, -240, 80, 192, -240, 80, 192, 240, 0, 192, 240, 80, 192, 240, 80, 208, 240, 80, 192, 240, 0, 208, 240, 0, 208, 240, 80, 192, 240, 0, 192, -240, 0, 192, -240, 0, -48, -240, 80, 192, -240, 80, 192, -240, 0, -48, -240, 80, -48, -240, 80, 192, -224, 80, 192, -240, 0, 192, -240, 0, 192, -224, 80, 192, -224, 0, 192, -240, 0, 192, -224, 0, 192, -240, 0, -48, -240, 0, -48, -224, 0, 192, -224, 0, -48, -240, 80, -48, -224, 80, -48, -240, 80, 192, -240, 80, 192, -224, 80, -48, -224, 80, 192, -240, 0, -48, -224, 0, -48, -240, 80, -48, -240, 80, -48, -224, 0, -48, -224, 80, -48, -224, 80, 192, -224, 80, -48, -224, 0, 192, -224, 0, 192, -224, 80, -48, -224, 0, -48, -32, 0, 192, -32, 0, -48, -32, 32, 192, -32, 32, 192, -32, 0, -48, -32, 32, -48, -32, 32, -48, 240, 64, -48, -32, 32, 192, -32, 32, 192, 240, 64, -48, 240, 64, 192, -32, 32, 192, 240, 64, 192, -32, 0, 192, -32, 0, 192, 240, 64, 192, 240, 0, 192, -32, 0, 192, 240, 0, 192, -32, 0, -48, -32, 0, -48, 240, 0, 192, 240, 0, -48, -32, 0, -48, 240, 0, -48, -32, 32, -48, -32, 32, -48, 240, 0, -48, 240, 64, -48, 240, 0, -48, 240, 0, 192, 240, 64, -48, 240, 64, -48, 240, 0, 192, 240, 64, 192, -64, 0, -48, -32, 32, -48, -64, 0, 192, -64, 0, 192, -32, 32, -48, -32, 32, 192, -64, 0, 192, -32, 32, 192, -32, 0, 192, -64, 0, 192, -32, 0, 192, -64, 0, -48, -64, 0, -48, -32, 0, 192, -32, 0, -48, -64, 0, -48, -32, 0, -48, -32, 32, -48, -32, 32, 192, -32, 32, -48, -32, 0, 192, -32, 0, 192, -32, 32, -48, -32, 0, -48, 248, -16, 208, 248, -16, -64, 248, 80, 208, 248, 80, 208, 248, -16, -64, 248, 80, -64, 248, 80, 208, 256, 80, 208, 248, -16, 208, 248, -16, 208, 256, 80, 208, 256, -16, 208, 248, -16, 208, 256, -16, 208, 248, -16, -64, 248, -16, -64, 256, -16, 208, 256, -16, -64, 248, 80, -64, 256, 80, -64, 248, 80, 208, 248, 80, 208, 256, 80, -64, 256, 80, 208, 248, -16, -64, 256, -16, -64, 248, 80, -64, 248, 80, -64, 256, -16, -64, 256, 80, -64, 256, 80, 208, 256, 80, -64, 256, -16, 208, 256, -16, 208, 256, 80, -64, 256, -16, -64, 240, -16, 208, 240, -16, -64, 240, 72, 208, 240, 72, 208, 240, -16, -64, 240, 72, -64, 240, 72, 208, 248, 72, 208, 240, -16, 208, 240, -16, 208, 248, 72, 208, 248, -16, 208, 240, -16, 208, 248, -16, 208, 240, -16, -64, 240, -16, -64, 248, -16, 208, 248, -16, -64, 240, 72, -64, 248, 72, -64, 240, 72, 208, 240, 72, 208, 248, 72, -64, 248, 72, 208, 240, -16, -64, 248, -16, -64, 240, 72, -64, 240, 72, -64, 248, -16, -64, 248, 72, -64, 248, 72, 208, 248, 72, -64, 248, -16, 208, 248, -16, 208, 248, 72, -64, 248, -16, -64, 240, 72, 208, 240, 72, 192, 240, 80, 208, 240, 80, 208, 240, 72, 192, 240, 80, 192, 240, 80, 208, 248, 80, 208, 240, 72, 208, 240, 72, 208, 248, 80, 208, 248, 72, 208, 240, 72, 208, 248, 72, 208, 240, 72, 192, 240, 72, 192, 248, 72, 208, 248, 72, 192, 240, 80, 192, 248, 80, 192, 240, 80, 208, 240, 80, 208, 248, 80, 192, 248, 80, 208, 240, 72, 192, 248, 72, 192, 240, 80, 192, 240, 80, 192, 248, 72, 192, 248, 80, 192, 248, 80, 208, 248, 80, 192, 248, 72, 208, 248, 72, 208, 248, 80, 192, 248, 72, 192, 240, 72, -48, 240, 72, -64, 240, 80, -48, 240, 80, -48, 240, 72, -64, 240, 80, -64, 240, 80, -48, 248, 80, -48, 240, 72, -48, 240, 72, -48, 248, 80, -48, 248, 72, -48, 240, 72, -48, 248, 72, -48, 240, 72, -64, 240, 72, -64, 248, 72, -48, 248, 72, -64, 240, 80, -64, 248, 80, -64, 240, 80, -48, 240, 80, -48, 248, 80, -64, 248, 80, -48, 240, 72, -64, 248, 72, -64, 240, 80, -64, 240, 80, -64, 248, 72, -64, 248, 80, -64, 248, 80, -48, 248, 80, -64, 248, 72, -48, 248, 72, -48, 248, 80, -64, 248, 72, -64)

[sub_resource type="Gradient" id="Gradient_ysurn"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_t7s72"]
noise_type = 3

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_8v8sc"]
width = 1024
height = 1024
seamless = true
color_ramp = SubResource("Gradient_ysurn")
noise = SubResource("FastNoiseLite_t7s72")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_hjqbr"]
albedo_color = Color(0.741176, 0.741176, 0.741176, 1)
albedo_texture = SubResource("NoiseTexture2D_8v8sc")

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_djlvd"]
panorama = ExtResource("9_qys48")

[sub_resource type="Sky" id="Sky_0tw1l"]
sky_material = SubResource("PanoramaSkyMaterial_djlvd")

[sub_resource type="Environment" id="Environment_plaoa"]
background_mode = 2
sky = SubResource("Sky_0tw1l")
sdfgi_enabled = true
volumetric_fog_enabled = true
volumetric_fog_density = 0.0
volumetric_fog_albedo = Color(0, 0.254902, 0.568627, 1)
volumetric_fog_sky_affect = 0.0

[node name="map" type="Node3D"]

[node name="FirstPersonCharacterBody3D" parent="." instance=ExtResource("1_ry0a0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.275538, 2.34141, 0)

[node name="MeshInstance3D2" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.72446, 0.763721, 0)
mesh = SubResource("BoxMesh_0aav7")

[node name="StaticBody3D" type="StaticBody3D" parent="MeshInstance3D2"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="MeshInstance3D2/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_u0i2t")

[node name="StaticBody3D" type="StaticBody3D" parent="."]

[node name="MeshInstance3D" type="MeshInstance3D" parent="StaticBody3D"]
mesh = SubResource("BoxMesh_7jii0")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_xx0cl")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.1539, 0.988086, 0, -0.988086, 0.1539, 0, 5.03243, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.53738, 8)
mesh = SubResource("BoxMesh_wc1fv")

[node name="StaticBody3D" type="StaticBody3D" parent="MeshInstance3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="MeshInstance3D/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_uhgr4")

[node name="MilitaryTarget2" parent="." instance=ExtResource("2_x7gfq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.869, 1.27283, -3.51814)

[node name="SpotLight3D" type="SpotLight3D" parent="."]
transform = Transform3D(-0.165519, 0.428036, -0.888475, 0.0783927, 0.903762, 0.420796, 0.983086, 0, -0.183145, 9.56924, 2.22609, -3.7725)
light_energy = 1.749
spot_range = 5.249

[node name="RigidBody3D" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.04804, 0.777669, 6.25413)
mass = 10.0

[node name="MeshInstance3D" type="MeshInstance3D" parent="RigidBody3D"]
mesh = SubResource("BoxMesh_mllw1")

[node name="CollisionShape3D" type="CollisionShape3D" parent="RigidBody3D"]
shape = SubResource("ConvexPolygonShape3D_h8o56")

[node name="Breakable_Barrel" parent="." instance=ExtResource("3_mk7d7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.255405, -7.51625)

[node name="Breakable_Jar" parent="." instance=ExtResource("4_g2uxp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.40389, 1.41497, -7.36922)

[node name="Breakable_Jar2" parent="." instance=ExtResource("4_g2uxp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.8742, 0.587597, -6.57374)

[node name="Breakable_Jar3" parent="." instance=ExtResource("4_g2uxp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.62077, 0.587597, -8.42955)

[node name="Breakable_Jar4" parent="." instance=ExtResource("4_g2uxp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.96097, 0.587597, -8.29359)

[node name="Breakable_Jar5" parent="." instance=ExtResource("4_g2uxp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.9634, 0.587597, -7.46282)

[node name="Breakable_Jar6" parent="." instance=ExtResource("4_g2uxp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.94384, 0.587597, -6.54195)

[node name="Breakable_Jar8" parent="." instance=ExtResource("4_g2uxp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -33.6176, 4.46391, 9.24944)

[node name="Breakable_Jar9" parent="." instance=ExtResource("4_g2uxp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.89154, 1.19333, -6.56513)

[node name="Breakable_Crates" parent="." instance=ExtResource("4_nrhjp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.63489, 0.603516, -7.51394)
explosion_force = 1.0

[node name="Breakable_Crates2" parent="." instance=ExtResource("4_nrhjp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.60584, 0.603516, -7.53931)
explosion_force = 1.0

[node name="Breakable_Crates3" parent="." instance=ExtResource("4_nrhjp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.58101, 1.43173, -7.5138)
explosion_force = 1.0

[node name="WaterArea3D" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -29.2375, -2.01535, 7.25362)
script = ExtResource("6_myy8d")
water_shader = ExtResource("7_5kl42")
float_force = 3.0
tidal_direction = Vector3(1, 0, 0)
tidal_force = 4.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="WaterArea3D"]
shape = SubResource("BoxShape3D_yk2u5")

[node name="WaterAmbience" type="AudioStreamPlayer3D" parent="WaterArea3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.93479, 0)
stream = ExtResource("8_jesnd")
attenuation_model = 3
volume_db = -10.0
unit_size = 50.0
pitch_scale = 1.15
autoplay = true
max_distance = 30.0
panning_strength = 2.0

[node name="SFXPlayer3D" type="AudioStreamPlayer3D" parent="WaterArea3D"]
volume_db = -3.536
max_distance = 30.0
script = ExtResource("9_g21i7")
sfx = Array[AudioStream]([ExtResource("10_f4kyv"), ExtResource("11_o4gop"), ExtResource("12_laggk")])

[node name="SplashSFX" type="Node" parent="WaterArea3D"]
script = SubResource("GDScript_gmyiu")

[node name="FogVolume" type="FogVolume" parent="WaterArea3D"]
size = Vector3(23, 4, 11.7)
material = SubResource("FogMaterial_67a4i")

[node name="StaticBody3D2" type="StaticBody3D" parent="."]
transform = Transform3D(0.048, 0, 0, 0, 0.048, 0, 0, 0, 0.048, -29.7693, -3.59143, 3.79334)

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D2"]
shape = SubResource("ConcavePolygonShape3D_a17bw")

[node name="SwimmingPool" type="MeshInstance3D" parent="StaticBody3D2"]
material_override = SubResource("StandardMaterial3D_hjqbr")
ignore_occlusion_culling = true
mesh = ExtResource("7_qqemd")
skeleton = NodePath("../..")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_plaoa")
